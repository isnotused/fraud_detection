# åŸºäºŽå¤§æ•°æ®çš„é‡‘èžé¢†åŸŸæ¶ˆè´¹æ¬ºè¯ˆæ£€æµ‹ç³»ç»Ÿ

## ðŸŽ¯ ç³»ç»Ÿæ¦‚è¿°

æœ¬ç³»ç»Ÿæ˜¯ä¸€ä¸ªé›†æˆå…ˆè¿›ç®—æ³•çš„å…¨æµç¨‹æ™ºèƒ½åŒ–æ¬ºè¯ˆæ£€æµ‹å¹³å°ï¼Œé€šè¿‡å¤šæºæ•°æ®é‡‡é›†ã€æ™ºèƒ½æ—¶åºåˆ†æžã€ç²¾å‡†è¡Œä¸ºè¯„ä¼°ã€å¤šç»´åº¦å¼‚å¸¸æ£€æµ‹ã€åŠ¨æ€é£Žé™©è¯„ä¼°å’Œæ¨¡åž‹è‡ªé€‚åº”æ›´æ–°ï¼Œç¡®ä¿æ¬ºè¯ˆæ£€æµ‹çš„å‡†ç¡®æ€§ã€å®žæ—¶æ€§å’Œé€‚åº”æ€§ã€‚

## ðŸ“‹ ç³»ç»Ÿæž¶æž„

### æ ¸å¿ƒæ¨¡å—

1. **ç”¨æˆ·æ•°æ®é‡‡é›† (users_data_app)**
   - é‡‘èžæ¶ˆè´¹äº¤æ˜“æ•°æ®ç”Ÿæˆä¸Žå±•ç¤º
   - å¤šç»´ç”¨æˆ·è¡Œä¸ºæ•°æ®åˆ†æž
   - ç”¨æˆ·è¡Œä¸ºäº¤äº’ç½‘ç»œå¯è§†åŒ–
   - å„æ—¶é—´çª—å£è¡Œä¸ºä¸€è‡´æ€§æŒ‡æ ‡

2. **é£Žé™©åˆ†æžè¯„ä¼° (data_analyzer_app)**
   - æ—¶åºåˆ†æžï¼šäº¤æ˜“æ—¶é—´åºåˆ—åç§»é‡è®¡ç®—
   - è¡Œä¸ºè¯„ä¼°ï¼šç”¨æˆ·è¡Œä¸ºç‰¹å¾åˆ†å¸ƒåˆ†æž
   - å¼‚å¸¸æ£€æµ‹ï¼šå¤šç»´åº¦å¼‚å¸¸ç‰¹å¾è¯†åˆ«
   - é£Žé™©è¯„ä¼°ï¼šåŠ¨æ€æ¬ºè¯ˆé£Žé™©å€¼è®¡ç®—
   - æ¬ºè¯ˆæ ‡è®°ï¼šè¾“å‡º"æ¬ºè¯ˆ"æˆ–"æ­£å¸¸"æ ‡è®°ç»“æžœ

3. **æ¨¡åž‹æ›´æ–°ä¼˜åŒ– (model_updater_app)**
   - è‡ªé€‚åº”å­¦ä¹ ï¼šä»ŽåŽ†å²æ•°æ®æŒç»­å­¦ä¹ 
   - å‚æ•°åŠ¨æ€è°ƒæ•´ï¼šæ ¹æ®é£Žé™©å€¼è°ƒæ•´æ¨¡åž‹
   - æ€§èƒ½ç›‘æŽ§ï¼šæ¨¡åž‹æ£€æµ‹å‡†ç¡®çŽ‡å˜åŒ–è¿½è¸ª
   - å¼‚å¸¸æ¨¡å¼è¯†åˆ«ï¼šå‘çŽ°æ–°çš„æ¬ºè¯ˆæ¨¡å¼

4. **ç³»ç»Ÿç®¡ç† (system_management)**
   - æ•°æ®ç®¡ç†ï¼šæ•°æ®é›†æŸ¥çœ‹ä¸Žç®¡ç†
   - æ¨¡åž‹é…ç½®ï¼šæ¨¡åž‹å‚æ•°è°ƒæ•´
   - ç³»ç»Ÿç›‘æŽ§ï¼šæ€§èƒ½æŒ‡æ ‡ç›‘æŽ§
   - æ—¥å¿—ç®¡ç†ï¼šæ“ä½œè®°å½•æŸ¥è¯¢

## ðŸš€ å¿«é€Ÿå¼€å§‹

### 1. å¯åŠ¨ç³»ç»Ÿ

```bash
cd /Users/fuwei/fraud_detection
uv run streamlit run APP/head.py
```

ç³»ç»Ÿå°†åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ï¼Œé»˜è®¤åœ°å€ï¼šhttp://localhost:8502

### 2. ä½¿ç”¨æµç¨‹

#### æ­¥éª¤1ï¼šç”Ÿæˆæ•°æ®
1. ç‚¹å‡»ä¾§è¾¹æ çš„ã€ç”¨æˆ·æ•°æ®ã€‘èœå•
2. ç‚¹å‡»"ðŸš€ ç”Ÿæˆæ¨¡æ‹Ÿæ•°æ®"æŒ‰é’®
3. ç­‰å¾…æ•°æ®ç”Ÿæˆå®Œæˆ
4. æŸ¥çœ‹å››ä¸ªæ•°æ®è§†å›¾ï¼š
   - é‡‘èžæ¶ˆè´¹äº¤æ˜“æ•°æ®
   - å¤šç»´ç”¨æˆ·è¡Œä¸ºæ•°æ®
   - ç”¨æˆ·è¡Œä¸ºäº¤äº’ç½‘ç»œ
   - è¡Œä¸ºä¸€è‡´æ€§åˆ†æž

#### æ­¥éª¤2ï¼šé£Žé™©åˆ†æž
1. ç‚¹å‡»ä¾§è¾¹æ çš„ã€é£Žé™©åˆ†æžè¯„ä¼°ã€‘èœå•
2. ç‚¹å‡»"ðŸ”¬ å¼€å§‹é£Žé™©åˆ†æž"æŒ‰é’®
3. ç­‰å¾…åˆ†æžå®Œæˆ
4. æŸ¥çœ‹å››ä¸ªåˆ†æžç»“æžœï¼š
   - æ¬ºè¯ˆæ£€æµ‹ç»“æžœ
   - å¼‚å¸¸ç‰¹å¾åˆ†å¸ƒ
   - é£Žé™©å€¼è¶‹åŠ¿
   - äº¤æ˜“ç±»åž‹åˆ†æž

#### æ­¥éª¤3ï¼šæ¨¡åž‹è®­ç»ƒ
1. ç‚¹å‡»ä¾§è¾¹æ çš„ã€æ¨¡åž‹æ›´æ–°ã€‘èœå•
2. ç‚¹å‡»"ðŸš€ è®­ç»ƒ/æ›´æ–°æ¨¡åž‹"æŒ‰é’®
3. æŸ¥çœ‹è®­ç»ƒç»“æžœï¼š
   - æ¨¡åž‹æ£€æµ‹å‡†ç¡®çŽ‡å˜åŒ–å›¾
   - è®­ç»ƒåŽ†å²è®°å½•

#### æ­¥éª¤4ï¼šç³»ç»Ÿç®¡ç†
1. ç‚¹å‡»ä¾§è¾¹æ çš„ã€ç³»ç»Ÿç®¡ç†ã€‘èœå•
2. æŸ¥çœ‹å››ä¸ªç®¡ç†æ ‡ç­¾ï¼š
   - æ•°æ®ç®¡ç†ï¼šæŸ¥çœ‹æ•°æ®é›†ä¿¡æ¯
   - æ¨¡åž‹é…ç½®ï¼šè°ƒæ•´æ¨¡åž‹å‚æ•°
   - ç³»ç»Ÿç›‘æŽ§ï¼šæŸ¥çœ‹ç³»ç»Ÿè¿è¡ŒçŠ¶æ€
   - æ—¥å¿—ç®¡ç†ï¼šæŸ¥çœ‹æ“ä½œè®°å½•

## ðŸ“Š åŠŸèƒ½è¯¦è§£

### ç”¨æˆ·æ•°æ®é‡‡é›†

**é‡‘èžæ¶ˆè´¹äº¤æ˜“æ•°æ®**
- åŒ…å«ç”¨æˆ·IDã€äº¤æ˜“æ—¶é—´ã€äº¤æ˜“ç±»åž‹ã€é‡‘é¢ã€åœ°ç‚¹ç­‰ä¿¡æ¯
- è‡ªåŠ¨æ ‡è®°æ¬ºè¯ˆäº¤æ˜“ï¼ˆçº¦1%çš„æ¬ºè¯ˆçŽ‡ï¼‰
- æ”¯æŒå¤šç§äº¤æ˜“ç±»åž‹ï¼šæ¶ˆè´¹ã€è½¬è´¦ã€æçŽ°ã€è¿˜æ¬¾ã€å……å€¼

**å¤šç»´ç”¨æˆ·è¡Œä¸ºæ•°æ®**
- ç”¨æˆ·åŸºæœ¬ä¿¡æ¯ï¼šå¹´é¾„ã€æ€§åˆ«ã€æ”¶å…¥æ°´å¹³ã€ä¿¡ç”¨åˆ†
- è®¾å¤‡ä½¿ç”¨ä¹ æƒ¯ï¼šè®¾å¤‡ç±»åž‹ã€ç™»å½•é¢‘çŽ‡
- äº¤æ˜“ä¹ æƒ¯ï¼šå¹³å‡äº¤æ˜“é¢ã€åå¥½äº¤æ˜“ç±»åž‹

**ç”¨æˆ·è¡Œä¸ºäº¤äº’ç½‘ç»œ**
- åŸºäºŽNetworkXå’ŒPlotlyçš„äº¤äº’å¼ç½‘ç»œå›¾
- èŠ‚ç‚¹å¤§å°è¡¨ç¤ºç”¨æˆ·æ´»è·ƒåº¦
- èŠ‚ç‚¹é¢œè‰²è¡¨ç¤ºä¿¡ç”¨åˆ†æ•°
- è¾¹è¡¨ç¤ºç”¨æˆ·é—´çš„è½¬è´¦å…³ç³»

**è¡Œä¸ºä¸€è‡´æ€§åˆ†æž**
- è®¡ç®—æ¯ä¸ªæ—¶é—´çª—å£çš„è¡Œä¸ºä¸€è‡´æ€§æŒ‡æ ‡
- æŸ±çŠ¶å›¾å±•ç¤ºï¼Œçº¢è‰²è™šçº¿æ ‡è®°é˜ˆå€¼
- é¢œè‰²æ¸å˜æ˜¾ç¤ºä¸€è‡´æ€§æ°´å¹³

### é£Žé™©åˆ†æžè¯„ä¼°

**æ¬ºè¯ˆæ£€æµ‹ç»“æžœ**
- ðŸ”´ é«˜é£Žé™©-æ¬ºè¯ˆï¼šé£Žé™©å€¼ > 0.7
- ðŸŸ¡ ä¸­é£Žé™©-ç–‘ä¼¼ï¼š0.5 < é£Žé™©å€¼ â‰¤ 0.7
- ðŸŸ¢ ä½Žé£Žé™©-æ­£å¸¸ï¼šé£Žé™©å€¼ â‰¤ 0.5
- è¯¦ç»†åˆ—è¡¨æ˜¾ç¤ºæ¯ä¸ªæ—¶é—´çª—å£çš„æ£€æµ‹ç»“æžœ

**å¼‚å¸¸ç‰¹å¾åˆ†å¸ƒ**
- çƒ­åŠ›å›¾å±•ç¤ºå„æ—¶é—´çª—å£çš„å¼‚å¸¸ç‰¹å¾
- çº¢è‰²è¡¨ç¤ºæ£€æµ‹åˆ°å¼‚å¸¸
- æ”¯æŒå¤šç»´åº¦ç‰¹å¾æ£€æµ‹

**é£Žé™©å€¼è¶‹åŠ¿**
- æ—¶é—´åºåˆ—æ›²çº¿å±•ç¤ºé£Žé™©å€¼å˜åŒ–
- é«˜é£Žé™©é˜ˆå€¼çº¿ï¼ˆ0.7ï¼‰
- ä¸­é£Žé™©é˜ˆå€¼çº¿ï¼ˆ0.5ï¼‰
- æ¸å˜å¡«å……æ˜¾ç¤ºé£Žé™©åŒºåŸŸ

**äº¤æ˜“ç±»åž‹åˆ†æž**
- åŒè½´å›¾è¡¨ï¼šæŸ±çŠ¶å›¾æ˜¾ç¤ºäº¤æ˜“æ•°é‡ï¼ŒæŠ˜çº¿å›¾æ˜¾ç¤ºæ¬ºè¯ˆçŽ‡
- è¯†åˆ«é«˜é£Žé™©äº¤æ˜“ç±»åž‹
- è¾…åŠ©é£Žé™©æŽ§åˆ¶ç­–ç•¥åˆ¶å®š

### æ¨¡åž‹æ›´æ–°ä¼˜åŒ–

**æ¨¡åž‹è®­ç»ƒ**
- åŸºäºŽRandomForestçš„æ¬ºè¯ˆæ£€æµ‹æ¨¡åž‹
- è‡ªåŠ¨ä»Žåˆ†æžç»“æžœæå–ç‰¹å¾
- 8ç»´ç‰¹å¾å‘é‡ï¼šäº¤æ˜“æ•°ã€æ€»é‡‘é¢ã€å¹³å‡é‡‘é¢ã€æœ€å¤§é‡‘é¢ã€æœ€å°é‡‘é¢ã€æ¬ºè¯ˆçŽ‡ã€ä¸€è‡´æ€§åˆ†æ•°ã€é£Žé™©å€¼

**æ€§èƒ½ç›‘æŽ§**
- å®žæ—¶æ˜¾ç¤ºå½“å‰å‡†ç¡®çŽ‡
- å‡†ç¡®çŽ‡å˜åŒ–è¶‹åŠ¿å›¾
- è®­ç»ƒåŽ†å²è®°å½•è¡¨

**å‚æ•°æ›´æ–°**
- åŸºäºŽåŠ¨æ€é£Žé™©å€¼è‡ªåŠ¨è°ƒæ•´æ¨¡åž‹å‚æ•°
- æ”¯æŒå¤šæ¬¡è¿­ä»£è®­ç»ƒ
- æŒç»­æå‡æ£€æµ‹èƒ½åŠ›

### ç³»ç»Ÿç®¡ç†

**æ•°æ®ç®¡ç†**
- æ•°æ®é›†æ¦‚è§ˆï¼šè®°å½•æ•°ã€å­—æ®µæ•°ã€å†…å­˜å ç”¨
- æ•°æ®æ“ä½œï¼šåˆ·æ–°ã€å¯¼å‡ºã€æ¸…é™¤

**æ¨¡åž‹é…ç½®**
- æŸ¥çœ‹å½“å‰æ¨¡åž‹å‚æ•°
- è°ƒæ•´å†³ç­–æ ‘æ•°é‡ã€æœ€å¤§æ·±åº¦ç­‰å‚æ•°
- å®žæ—¶åº”ç”¨æ–°é…ç½®

**ç³»ç»Ÿç›‘æŽ§**
- ç³»ç»ŸçŠ¶æ€ï¼šè¿è¡Œä¸­/æœªå¯åŠ¨
- æ¨¡åž‹çŠ¶æ€ï¼šå·²è®­ç»ƒ/æœªè®­ç»ƒ
- åˆ†æžçŠ¶æ€ï¼šå·²å®Œæˆ/æœªå®Œæˆ
- æ€§èƒ½è¶‹åŠ¿å›¾

**æ—¥å¿—ç®¡ç†**
- æ“ä½œæ—¥å¿—è®°å½•
- æ—¶é—´æˆ³ã€æ“ä½œç±»åž‹ã€çŠ¶æ€ã€è¯¦æƒ…
- æ”¯æŒæ—¥å¿—å¯¼å‡º

## ðŸŽ¨ å¯è§†åŒ–ç‰¹ç‚¹

### å›¾è¡¨ç¾ŽåŒ–
- ç»Ÿä¸€çš„é…è‰²æ–¹æ¡ˆ
- åŠé€æ˜ŽèƒŒæ™¯ `rgba(240,240,240,0.5)`
- å“åº”å¼è®¾è®¡ï¼Œè‡ªé€‚åº”å®¹å™¨å®½åº¦
- äº¤äº’å¼å›¾è¡¨ï¼Œæ”¯æŒç¼©æ”¾ã€æ‚¬åœæç¤º

### è§†è§‰å…ƒç´ 
- ðŸ“Š ðŸ“ˆ ðŸ” ç­‰è¡¨æƒ…ç¬¦å·å¢žå¼ºç”¨æˆ·ä½“éªŒ
- é¢œè‰²ç¼–ç é£Žé™©ç­‰çº§ï¼ˆðŸ”´ðŸŸ¡ðŸŸ¢ï¼‰
- æ¸…æ™°çš„æ•°æ®åº¦é‡æŒ‡æ ‡
- ç›´è§‚çš„è¶‹åŠ¿çº¿å’Œé˜ˆå€¼çº¿

## ðŸ”§ æŠ€æœ¯æ ˆ

- **å‰ç«¯æ¡†æž¶**: Streamlit 1.51.0
- **æ•°æ®å¤„ç†**: Pandas, NumPy
- **æœºå™¨å­¦ä¹ **: Scikit-learn (RandomForest)
- **å¯è§†åŒ–**: Plotly, Matplotlib, Seaborn
- **ç½‘ç»œåˆ†æž**: NetworkX
- **ä¿¡å·å¤„ç†**: SciPy

## ðŸ“ˆ æ ¸å¿ƒç®—æ³•

### 1. æ—¶é—´åç§»é‡è®¡ç®—
ä½¿ç”¨äº’ç›¸å…³å‡½æ•°è®¡ç®—ä¸åŒäº¤æ˜“åºåˆ—é—´çš„æ—¶åºåç§»

```python
def calculate_time_offset(transaction_sequences):
    # è®¡ç®—äº’ç›¸å…³
    corr = correlate(diffs1, diffs2, mode='same')
    # æ‰¾åˆ°æœ€å¤§ç›¸å…³å€¼å¯¹åº”çš„åç§»é‡
    optimal_offset = max_corr_idx - len(corr) // 2
```

### 2. è¡Œä¸ºä¸€è‡´æ€§è®¡ç®—
ä½¿ç”¨ä½™å¼¦ç›¸ä¼¼åº¦è¯„ä¼°è¡Œä¸ºä¸€è‡´æ€§

```python
def calculate_behavior_consistency(trans_dist, behav_dist):
    # ä½™å¼¦ç›¸ä¼¼åº¦
    similarity = dot_product / (norm_trans * norm_behav)
    consistency = similarity * (1 - offset_impact)
```

### 3. åŠ¨æ€é£Žé™©å€¼ç”Ÿæˆ
ç»¼åˆå¼‚å¸¸ç‰¹å¾å’Œè¡Œä¸ºå˜åŒ–

```python
def generate_dynamic_risk_value(anomaly_features, consistency_scores):
    # æ ¸å¿ƒå¼‚å¸¸ç»´åº¦æ–¹å·®
    core_variance = np.var(core_values)
    # è¡Œä¸ºå˜åŒ–é‡ï¼ˆJSæ•£åº¦ï¼‰
    behavior_change = js_divergence(dist1, dist2)
    # é£Žé™©å› å­
    risk_factor = 0.7 * core_variance * (1-consistency) + 0.3 * behavior_change
```

### 4. æ¬ºè¯ˆæ£€æµ‹æ¨¡åž‹
RandomForeståˆ†ç±»å™¨

```python
model = RandomForestClassifier(
    n_estimators=50,
    max_depth=10,
    class_weight='balanced'
)
```

## ðŸ’¡ ä½¿ç”¨å»ºè®®

1. **æ•°æ®é‡è®¾ç½®**: é»˜è®¤100ç”¨æˆ·ã€7å¤©æ•°æ®ã€æ¯å¤©500ç¬”äº¤æ˜“
2. **æ—¶é—´çª—å£**: é»˜è®¤6å°æ—¶çª—å£ï¼Œå¯æ ¹æ®éœ€æ±‚è°ƒæ•´
3. **æ¨¡åž‹è®­ç»ƒ**: å»ºè®®å…ˆå®Œæˆæ•°æ®ç”Ÿæˆå’Œé£Žé™©åˆ†æž
4. **å‚æ•°è°ƒä¼˜**: åœ¨ç³»ç»Ÿç®¡ç†ä¸­è°ƒæ•´æ¨¡åž‹å‚æ•°ä»¥èŽ·å¾—æ›´å¥½æ•ˆæžœ
5. **å¤šæ¬¡è®­ç»ƒ**: æ”¯æŒå¤šæ¬¡è®­ç»ƒï¼ŒæŸ¥çœ‹å‡†ç¡®çŽ‡å˜åŒ–è¶‹åŠ¿

## ðŸ› æ•…éšœæŽ’é™¤

### é—®é¢˜ï¼šé¡µé¢æç¤º"è¯·å…ˆç”Ÿæˆæ•°æ®"
**è§£å†³**: è¿›å…¥ã€ç”¨æˆ·æ•°æ®ã€‘é¡µé¢ï¼Œç‚¹å‡»"ç”Ÿæˆæ¨¡æ‹Ÿæ•°æ®"

### é—®é¢˜ï¼šåˆ†æžé¡µé¢æ— æ³•è®¿é—®
**è§£å†³**: ç¡®ä¿å·²åœ¨ã€ç”¨æˆ·æ•°æ®ã€‘é¡µé¢ç”Ÿæˆæ•°æ®

### é—®é¢˜ï¼šæ¨¡åž‹è®­ç»ƒå¤±è´¥
**è§£å†³**: ç¡®ä¿å·²åœ¨ã€é£Žé™©åˆ†æžè¯„ä¼°ã€‘é¡µé¢å®Œæˆåˆ†æž

### é—®é¢˜ï¼šå›¾è¡¨æ˜¾ç¤ºå¼‚å¸¸
**è§£å†³**: ç‚¹å‡»"é‡æ–°åˆ†æž"æˆ–"é‡æ–°ç”Ÿæˆæ•°æ®"æŒ‰é’®

## ðŸ“ æ›´æ–°æ—¥å¿—

### Version 1.0.0 (2025-11-11)
- âœ… å®Œæ•´çš„å››æ¨¡å—ç³»ç»Ÿ
- âœ… ç¾ŽåŒ–çš„å¯è§†åŒ–å›¾è¡¨
- âœ… å®Œæ•´çš„å·¥ä½œæµç¨‹
- âœ… æ¬ºè¯ˆæ£€æµ‹æ ‡è®°åŠŸèƒ½
- âœ… æ¨¡åž‹è‡ªé€‚åº”æ›´æ–°

## ðŸ‘¥ å¼€å‘å›¢é˜Ÿ

åŸºäºŽå¤§æ•°æ®ä¸Žæœºå™¨å­¦ä¹ æŠ€æœ¯çš„é‡‘èžæ¬ºè¯ˆæ£€æµ‹ç³»ç»Ÿ

## ðŸ“§ è”ç³»æ–¹å¼

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·è”ç³»ç³»ç»Ÿç®¡ç†å‘˜ã€‚

---

**Â© 2025 é‡‘èžæ¬ºè¯ˆæ£€æµ‹ç³»ç»Ÿ | æ™ºèƒ½é£ŽæŽ§ï¼Œå®ˆæŠ¤å®‰å…¨**
